@startuml
left to right direction
skinparam packageStyle rectangle
skinparam usecase {
  BackgroundColor white
  BorderColor black
}

actor "Visitor" as Visitor
actor "Customer\n(optional)" as Customer
actor "Producer" as Producer
actor "Tenant Admin" as TenantAdmin
actor "Platform Admin" as PlatformAdmin

rectangle " The Mosaical Hololith Platform (MVP)" {

  package "Public Hub" {
    usecase "Browse Home" as UC_Home
    usecase "Explore (Search/Filter)" as UC_Explore
    usecase "View Tag Page" as UC_TagPage
    usecase "View Storefront" as UC_Storefront
    usecase "View Product/Service" as UC_ProductView
    usecase "Open Support/Legal Pages" as UC_SupportLegal
    usecase "Track Basic Analytics Events" as UC_TrackEvents
  }

  package "Auth" {
    usecase "Register" as UC_Register
    usecase "Login" as UC_Login
    usecase "Reset Password" as UC_Reset
  }

  package "Producer Dashboard" {
    usecase "Create Tenant (Organization)" as UC_CreateTenant
    usecase "Manage Team Members" as UC_Team
    usecase "Create Store" as UC_CreateStore
    usecase "Edit Store Settings" as UC_StoreSettings
    usecase "Pick/Change Theme" as UC_Theme
    usecase "Manage Pages" as UC_Pages
    usecase "Manage Catalog (CRUD)" as UC_Catalog
    usecase "Publish/Unpublish Store" as UC_PublishStore
    usecase "Assign Tags (Plan-limited)" as UC_AssignTags
    usecase "Manage Domain/Subdomain" as UC_Domain
    usecase "View Basic Analytics" as UC_ViewAnalytics
    usecase "View Quotas / Usage" as UC_ViewUsage
  }

  package "Plans & Quotas" {
    usecase "View Current Plan" as UC_ViewPlan
    usecase "Upgrade/Downgrade Plan (stub)" as UC_ChangePlan
    usecase "Enforce Quotas & Feature Gates" as UC_Enforce
  }

  package "Platform Admin (Internal)" {
    usecase "Manage Tags & Policies" as UC_AdminTags
    usecase "Search/Inspect Stores" as UC_AdminStores
    usecase "Suspend/Unpublish Store" as UC_Suspend
    usecase "View Reports" as UC_Reports
    usecase "Resolve Reports" as UC_ResolveReports
  }
}

' ===== Actor -> Use case links =====

Visitor --> UC_Home
Visitor --> UC_Explore
Visitor --> UC_TagPage
Visitor --> UC_Storefront
Visitor --> UC_ProductView
Visitor --> UC_SupportLegal

Customer --> UC_Register
Customer --> UC_Login
Customer --> UC_Reset
Customer --> UC_Explore
Customer --> UC_Storefront
Customer --> UC_ProductView

Producer --> UC_Register
Producer --> UC_Login
Producer --> UC_Reset
Producer --> UC_CreateTenant
Producer --> UC_CreateStore
Producer --> UC_StoreSettings
Producer --> UC_Theme
Producer --> UC_Pages
Producer --> UC_Catalog
Producer --> UC_AssignTags
Producer --> UC_Domain
Producer --> UC_PublishStore
Producer --> UC_ViewAnalytics
Producer --> UC_ViewUsage
Producer --> UC_ViewPlan

TenantAdmin --> UC_Team
TenantAdmin --> UC_ViewPlan
TenantAdmin --> UC_ChangePlan
TenantAdmin --> UC_ViewUsage
TenantAdmin --> UC_Domain
TenantAdmin --> UC_PublishStore

PlatformAdmin --> UC_AdminTags
PlatformAdmin --> UC_AdminStores
PlatformAdmin --> UC_Suspend
PlatformAdmin --> UC_Reports
PlatformAdmin --> UC_ResolveReports

' ===== Includes / extends =====

UC_Explore .> UC_TrackEvents : <<include>>
UC_Storefront .> UC_TrackEvents : <<include>>
UC_ProductView .> UC_TrackEvents : <<include>>
UC_TagPage .> UC_TrackEvents : <<include>>

UC_CreateStore .> UC_Enforce : <<include>>
UC_Catalog .> UC_Enforce : <<include>>
UC_AssignTags .> UC_Enforce : <<include>>
UC_Domain .> UC_Enforce : <<include>>
UC_PublishStore .> UC_Enforce : <<include>>
UC_ChangePlan .> UC_Enforce : <<include>>

UC_ChangePlan ..> UC_ViewPlan : <<extend>>
UC_PublishStore ..> UC_CreateStore : <<extend>>
UC_Catalog ..> UC_CreateStore : <<extend>>
UC_Pages ..> UC_CreateStore : <<extend>>
UC_AssignTags ..> UC_CreateStore : <<extend>>
UC_Domain ..> UC_CreateStore : <<extend>>

@enduml
